<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Wynncon Festival Editor</title>

    <!-- Foundation CSS framework (Bootstrap and jQueryUI also supported) -->
    <link rel='stylesheet' href='//cdn.jsdelivr.net/bootstrap/3.2.0/css/bootstrap.css'>
    <!-- Font Awesome icons (Bootstrap, Foundation, and jQueryUI also supported) -->
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.6.1/css/all.css'>

    <script src="https://cdn.jsdelivr.net/npm/@json-editor/json-editor@1.3.5/dist/jsoneditor.min.js"></script>
</head>
<body>
<div class='container'>
    <div class='row' style='padding-bottom: 15px;'>
        <div class='col-md-12'>
            <h1>Wynncon Festival Editor</h1>
            <p>For Wynncon, by Nova/Fire.</p>
			<br>
			<p>Used for Festivals.</p>
        </div>
    </div>
    <div class='row' style='padding-bottom: 15px;'>
        <div class='col-md-12'>
            <button id='restore' class='btn btn-info'>Restore to Default</button>
            <span id='valid_indicator' class='label label-success'></span>
        </div>
    </div>
    <div class='row'>
        <div class='col-md-12'>
            <div id='editor_holder'></div>
        </div>
    </div>
</div>

<script>
       // Initialize the editor
    var editor = new JSONEditor(document.getElementById('editor_holder'),{
        theme: 'bootstrap3',
        iconlib: 'fontawesome5',

        // Enable fetching schemas via ajax
        ajax: true,

        // The schema for the editor
        schema: {
            title: "Festival Editor",
            defaultProperties: [
                "id",
				"name",
				"material",
				"description"
            ],
            additionalProperties:false,
            properties: {
                 id: {
                    required: true,
                    propertyOrder: 1,
                    title: "id",
                    description: "The ID of the Festival. Needs to be unique.",
                    type: "string",
                    default: "festival_2021"
                },
				name: {
                    required: true,
                    propertyOrder: 2,
                    title: "name",
                    description: "The name of the Festival.",
                    type: "string",
                    default: "Festival 2021"
                },
				world: {
                    required: true,
                    propertyOrder: 3,
                    title: "world",
                    description: "The world that the festival builds are contained in for use",
                    type: "string",
                    default: "world"
                },
				games: {
                    propertyOrder: 4,
                    title: "games",
                    description: "The games for this festival.",
					properties: {
						elemental_balloons: {
							title: "elemental_balloons",
							description: "Players undertake the Archer class and fire and pop as many Elemental balloons as they can. Players will have “Fast Attack Speed” and no access to spells in this game. Different types of Elemental balloons will incur different effects.",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								},
								regions: {
								    required: true,
									title: "regions",
									description: "The regions where the balloons will spawn",
									type: "array",
									items: {
										title: "region",
										properties: {
											center: {
												required: true,
												title: "center",
												description: "The vector location of the region",
												type: "string",
												default: "0,0,0"
											},
											x: {
												title: "x",
												description: "The X region radius",
												type: "number",
												default: 1
											},
											y: {
												title: "y",
												description: "The Y region radius",
												type: "number",
												default: 1
											},
											z: {
												title: "z",
												description: "The Z region radius",
												type: "number",
												default: 1
											}
										},
										type: "object"
									}
								}
							}
						},
						laser_tag: {
							title: "laser_tag",
							description: "In this FFA, players have 3 minutes to go head-to-head to try and tag as many players using infinity-ranged lasers. During this time, all spells and movement speed effects are canceled.",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								}
							}
						},
						cc_sumo: {
							title: "cc_sumo",
							description: "Players need to fight to stay on top of a platform. They can use any and all spells, but they cannot damage or kill other players. Each second that the player stands on the platform will gain a point. The player with the most points after 90 seconds wins.",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								},
								spawns: {
								    required: true,
									title: "spawns",
									description: "The spawnpoints where players will spawn whenever the game starts",
									type: "array",
									items: {
										type: "string",
										title: "loc",
										default: "0,0,0"
									}
								},
								sumo_spot: {
								    required: true,
									title: "sumo_spot",
									description: "The spot where the players need to fight to get on top of. Needs a center and radius. The hitbox behaves like a flat circle.",
									properties: {
										center: {
											required: true,
											title: "center",
											description: "The vector location of the spot",
											type: "string",
											default: "0,0,0"
										},
										radius: {
											required: true,
											title: "radius",
											description: "The radius of the circle",
											type: "number",
											default: 1
										},
										height: {
											required: true,
											title: "height",
											description: "The height of the circle",
											type: "number",
											default: 1
										}
									},
									type: "object"
								}
							}
						},
						meteor_spleef: {
							title: "meteor_spleef",
							description: "Players undertake the Mage class and use Meteor to spleef the platform under other players. There are 3 platform layers in total, and players can rain down meteors on the platforms below them and above them. If a player goes under all 3 platforms, they are eliminated. Last player standing wins!",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								},
								spectator: {
								    required: true,
									title: "spectator",
									description: "The vector location where the players will go to spectate whenever they're eliminated",
									type: "string",
									default: "0,0,0"
								}
							}
						},
						charged_potato: {
							title: "charged_potato",
							description: "Players undertake the Warrior class to play hot potato! A random player is selected to carry the hot potato. After 10 seconds, the potato will explode on the carrier and eliminate them. Then, another random player will be selected. Players can pass the hot potato by hitting other players with Charges and Melee attacks. The last player standing wins!",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								}
							}
						},
						airborne_hunt: {
							title: "airborne_hunt",
							description: "Players undertake the Elytrian class and fly around small sky islands to collect Air Spirits and gain points. Players will be able to use Windburst (RLL) to knock other players out of the sky temporarily, and steal up to 50% of their points. The player with the most points after 90 seconds wins!",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								},
								regions: {
								    required: true,
									title: "regions",
									description: "The regions where the spirits will spawn",
									type: "array",
									items: {
										title: "region",
										properties: {
											center: {
												required: true,
												title: "center",
												description: "The vector location of the region",
												type: "string",
												default: "0,0,0"
											},
											x: {
												title: "x",
												description: "The X region radius",
												type: "number",
												default: 1
											},
											y: {
												title: "y",
												description: "The Y region radius",
												type: "number",
												default: 1
											},
											z: {
												title: "z",
												description: "The Z region radius",
												type: "number",
												default: 1
											}
										},
										type: "object"
									}
								}
							}
						},
						totem_munchers: {
							title: "totem_munchers",
							description: "Players undertake the Shaman class and use Aura and Totem to pull as many mobs towards their totem as possible. Mobs that come near the player’s totem will instantly die and give the player points.",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								},
								regions: {
								    required: true,
									title: "regions",
									description: "The regions where the mobs will spawn",
									type: "array",
									items: {
										title: "region",
										properties: {
											center: {
												required: true,
												title: "center",
												description: "The vector location of the region",
												type: "string",
												default: "0,0,0"
											},
											x: {
												title: "x",
												description: "The X region radius",
												type: "number",
												default: 1
											},
											y: {
												title: "y",
												description: "The Y region radius",
												type: "number",
												default: 1
											},
											z: {
												title: "z",
												description: "The Z region radius",
												type: "number",
												default: 1
											}
										},
										type: "object"
									}
								}
							}
						},
						elytra_wars: {
							title: "elytra_wars",
							description: "Players undertake the Elytrian Class and duke it out on the Sky Islands for 90s. The player with the most kills wins!",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								},
								spawns: {
								    required: true,
									title: "spawns",
									description: "The spawnpoints where players will respawn",
									type: "array",
									items: {
										type: "string",
										title: "loc",
										default: "0,0,0"
									}
								}
							}
						},
						vanish_and_spin: {
							title: "vanish_and_spin",
							description: "Players undertake the Assassin class to play Hide n' Seek, but with Vanish. The goal is to kill other players by 1-shotting them, but players can vanish to hide in plain sight. Vanish, Spin Attack, and Smoke Bomb have increased mana costs. The last player standing win!",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								}
							}
						},
						paintwar_of_the_realms: {
							title: "paintwar_of_the_realms",
							description: "Players are randomly assigned to 2 teams, Light or Dark, and are given paintballs to throw. The goal is to eliminate the other team. When a paintball lands however, it creates a splatter of light/dark that will harm the opposing team, dealing 25% of their absorption shield. This splatter lasts for 10 seconds. 3 rounds of this are played. The team that has the most wins gains game points!",
							type: "object",
							properties: {
								spawn: {
								    required: true,
									title: "spawn",
									description: "The vector location where the players spawn",
									type: "string",
									default: "0,0,0"
								},
								spawnLight: {
								    required: true,
									title: "spawnLight",
									description: "The vector location where the Light team will spawn",
									type: "string",
									default: "0,0,0"
								},
								spawnDark: {
								    required: true,
									title: "spawnDark",
									description: "The vector location where the Dark team will spawn",
									type: "string",
									default: "0,0,0"
								}
							}
						}
					},
					type: "object",
                }
            }
        }
    });

    // Hook up the Restore to Default button
    document.getElementById('restore').addEventListener('click',function() {
        editor.setValue(starting_value);
    });

    // Hook up the validation indicator to update its
    // status whenever the editor changes
    editor.on('change',function() {
        // Get an array of errors from the validator
        var errors = editor.validate();

        var indicator = document.getElementById('valid_indicator');

        // Not valid
        if(errors.length) {
            indicator.className = 'label label-danger'
            indicator.textContent = "not valid";
        }
        // Valid
        else {
            indicator.className = 'label label-success'
            indicator.textContent = "valid";
        }
    });
</script>
</body>
</html>
